# 应当如何面对线上的异常/故障

看起来毫无意义的一个问题，碰到线上异常/故障如何面对，排查解决了不就好了，但是这真的只是第一层。

最近在想“消防”这个词语很有意思，它其实是两层意思：

 - “消”是消除问题；
 - “防”是防止问题。

即“消防”这个词语表达的意思应该是先消除问题再防止相同的问题再次发生。其实线上的异常/故障也是同样的道理，我们应当先及时止血，把问题处理掉，然后深挖问题，探究根因，举几个例子：

假设是某段代码的空指针异常导致的，那么是否考虑加强Code Review，或者使用findbugs插件去自动扫描代码中可能的异常？
假设是线上某个配置修改导致的，那么是否今后变更的修改必须有人双重检查一遍才可以修改？
假设是本地内存中某些值因为系统重启丢失导致的，那么是否引入定时任务，定时把值写入本地内存中？
假设是某段代码逻辑没测试到导致的，那么是否可以反思总结为什么这段逻辑没有测试到，未来的测试应该如何改进？
根据我过往的经验，太多公司、太多团队处理线上的问题仅仅满足于把问题处理完就完事，忽略了对问题的复盘，这对团队/对公司的发展都是不利的。


简而言之，技术能力 = 解决问题的能力，那么同样都在解决问题，大家之间的技术高低又有什么区分呢？我认为有以下几个层次：

 1. 第一层级，解决当下问题；
 1. 第二层级，以优雅且可复用的方式解决当下问题；
 1. 第三层级，解决的问题不仅仅能满足当下，还能满足未来一段时间。
 1. 其实从这个角度上来看，不同的技术能力，在工作过程中区分度是很明显的：

写的代码是否存在异常风险，多线程运行下是否存在线程安全问题，某段代码是否会导致内存泄露；
写的代码是否优雅可复用，设计的框架是否足够符合开闭原则，代码结构层次是否清晰明了；
针对特定的场景，技术选型、库表结构设计是否足够合理，今天你设计的框架是只能用一年，还是未来三年五年都可以持续使用；
来了一个大的需求，就比如做一个App的会员体系功能好了，是否可以在充分分析需求后，精确将需求划分为几个特定的子模块并梳理清楚模块之间的关系。

越厉害的人，在代码设计与开发过程中，越能看到想到一些别人看不到想不到的问题，这叫做高屋建瓴；
当代码运行出现问题的时候，有人1小时排查出问题，有人1分钟发现问题，这叫做举重若轻。