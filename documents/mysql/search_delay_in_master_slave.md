# search delay question after read/write separate

在读写分离架构中会出现一个共性问题：SQL读取延迟。
比如在微服务应用端新增一条业务数据，然后立即读取，这个时候会遇到读取不到情况！
在读写分离架构中，主节点负责写入数据，同时mysql利用多线程技术把数据同步到从节点，从节点负责应用端读取请求。
而Mysql主从数据同步数据存在同步时间差，带来的问题是从节点同步不到主节点（Master）数据，应用端从从节点（Slave）读取不到新增的数据情况。

## 解决方案

1. use Router proxy (分片键值管理器)， 强制路由到主库查询
    
通过强制路由到主库查询有个风险，对于更新并实时查询业务场景比较多，如果都切到主库查询，势必会对主库服务器性能造成影响，可能还影响主从数据同步

2. 业务层面可以做妥协的话，尽量减少这种更新并实时查询方式.  

such as : use 实时更新库，利用线程异步查询

3. 在缓存中多写一份，通过缓存获得最新数据。

？  Redis主从异步复制，从read-only replica中可能读到旧的数据，使用读写分离需要业务可以容忍一定程度的数据不一致，
后续将会给客户更灵活的配置和更大的自由，比如配置可以容忍的最大延迟时间。

o ?
